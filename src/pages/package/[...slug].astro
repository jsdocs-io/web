---
import { handlePackage } from "../../../lib/handlers/package/handle-package";
// import PackagePageAlerts from "../../components/PackagePageAlerts.astro";
// import PackagePageArticle from "../../components/PackagePageArticle.astro";
// import PackagePageSidebar from "../../components/PackagePageSidebar.astro";
// import QuickSearch from "../../components/QuickSearch.astro";
import RootLayout from "../../layouts/RootLayout.astro";

export const prerender = false;

const { slug } = Astro.params;
if (!slug) return Astro.redirect("/404");

const res = await handlePackage(slug);
if (res.status === "bad-request") return Astro.redirect("/400"); // TODO: add page
if (res.status === "not-found") return Astro.redirect("/404");
if (res.status === "found") return Astro.redirect(res.path);
if (res.status === "error") return Astro.redirect("/500");

const pkgId = res.pkgInfo.pkgId;
const title = pkgId;
const description = `Documentation for npm package ${pkgId} on jsDocs.io`;
---

<RootLayout {title} {description}>
	<div
		class="grid grid-cols-1 gap-8 md:grid-cols-[12rem_minmax(0,1fr)] lg:grid-cols-[18rem_minmax(0,1fr)]"
	>
		<!-- <PackagePageAlerts {...props} /> -->
		<!-- <PackagePageSidebar {...props} /> -->
		<!-- <PackagePageArticle {...props} /> -->
	</div>

	<!-- <QuickSearch slot="modals" /> -->
</RootLayout>

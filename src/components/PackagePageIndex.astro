---
import type { HandlePackageData } from "../../lib/handlers/package/handle-package";
import PackagePageIndexDeclarations from "./PackagePageIndexDeclarations.astro";

type Props = HandlePackageData;

const { status, pkgInfo } = Astro.props;
const { pkgJson } = pkgInfo;
const hasPeerDeps = Object.keys(pkgJson.peerDependencies ?? {}).length > 0;
---

<div class="flex flex-col gap-6 overflow-y-auto">
	{/* Overview. */}
	<a href="#package-overview" class="link-hover link font-bold">Overview</a>

	{/* Declarations. */}
	{
		status === "pkg-has-api" && (
			<PackagePageIndexDeclarations
				containerName="package"
				declarations={pkgInfo.pkgApi.declarations}
			/>
		)
	}

	{/* Dependencies. */}
	<a href="#package-dependencies" class="link-hover link font-bold">Dependencies</a>
	<a href="#package-dev-dependencies" class="link-hover link font-bold">Dev dependencies</a>
	{
		hasPeerDeps && (
			<a href="#package-peer-dependencies" class="link-hover link font-bold">
				Peer dependencies
			</a>
		)
	}

	{/* Badge. */}
	<a href="#package-badge" class="link-hover link font-bold">Badge</a>

	{/* About. */}
	<a href="#package-about" class="link-hover link font-bold">About</a>
</div>
